#!/bin/bash

includes=$(cat $1 | grep include | sed -r 's/^include <([^>]*)>$/\1/')
uses=$(    cat $1 | grep use     | sed -r 's/^use <([^>]*)>$/\1/')

echo "######################################################################################"
echo "#  $1  #"
echo "######################################################################################"
cat $1 | grep -V 'include <' | grep -V 'use <'
for file in $includes $uses
do
   echo "######################################################################################"
   echo "#  $file  #"
   echo "######################################################################################"
   cat $file
done
